{"version":3,"file":"bundle.js","sources":["../../dist/common/interfaces.js","../../dist/common/functions.js","../../dist/client/index.js"],"sourcesContent":["export var PomodoroEvent;\n(function (PomodoroEvent) {\n    PomodoroEvent[PomodoroEvent[\"STOPPED\"] = 0] = \"STOPPED\";\n    PomodoroEvent[PomodoroEvent[\"STARTED\"] = 1] = \"STARTED\";\n    PomodoroEvent[PomodoroEvent[\"LONG_STOP\"] = 2] = \"LONG_STOP\";\n    PomodoroEvent[PomodoroEvent[\"SYNC_CONFIG\"] = 3] = \"SYNC_CONFIG\";\n    PomodoroEvent[PomodoroEvent[\"AWK_SYNC\"] = 4] = \"AWK_SYNC\";\n    PomodoroEvent[PomodoroEvent[\"CONNECT\"] = 5] = \"CONNECT\";\n})(PomodoroEvent || (PomodoroEvent = {}));\n//# sourceMappingURL=interfaces.js.map","export function formPomodoroState(currentTime, currentCycle) {\n    return {\n        currentTime: currentTime,\n        currentCycle: currentCycle,\n    };\n}\nexport function formMessageBlock(event) {\n    return { event: event };\n}\n//# sourceMappingURL=functions.js.map","import { PomodoroEvent, } from \"../common/interfaces.js\";\nimport * as functions from \"../common/functions.js\";\nclass PomoState {\n    currentEvent = PomodoroEvent.STOPPED;\n    listeners = [];\n    constructor() { }\n    registerListener(handler) {\n        this.listeners.push(handler);\n    }\n    broadcastUpdate() {\n        this.listeners.forEach(() => {\n            return this.currentEvent;\n        });\n    }\n    setCurrentEvent(newEvent) {\n        this.currentEvent = newEvent;\n        this.broadcastUpdate();\n    }\n    genMsgBlock() {\n        return functions.formMessageBlock(this.currentEvent);\n    }\n}\nconst currentState = new PomoState();\nlet socket;\nfunction addListeners(socket) {\n    socket.addEventListener(\"open\", (event) => {\n        console.log(\"Opened it!\");\n        let msgBlock = currentState.genMsgBlock();\n        console.log(JSON.stringify(msgBlock.toString()));\n        socket.send(JSON.stringify(msgBlock.toString()));\n    });\n    socket.addEventListener(\"close\", (event) => {\n        console.log(event.reason);\n    });\n    socket.addEventListener(\"message\", (event) => {\n        let msgBlock = JSON.parse(event.data);\n        currentState.setCurrentEvent(msgBlock.event);\n    });\n}\nfunction init() {\n    socket = new WebSocket(\"ws://\" + window.location.host + \"/api/v1/\");\n    addListeners(socket);\n}\ndocument.body.addEventListener(\"DOMContentLoaded\", () => init());\n//# sourceMappingURL=index.js.map"],"names":["functions.formMessageBlock"],"mappings":"AAAO,IAAI,aAAa;AACxB,CAAC,UAAU,aAAa,EAAE;AAC1B,IAAI,aAAa,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS;AAC3D,IAAI,aAAa,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS;AAC3D,IAAI,aAAa,CAAC,aAAa,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,GAAG,WAAW;AAC/D,IAAI,aAAa,CAAC,aAAa,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,GAAG,aAAa;AACnE,IAAI,aAAa,CAAC,aAAa,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,GAAG,UAAU;AAC7D,IAAI,aAAa,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS;AAC3D,CAAC,EAAE,aAAa,KAAK,aAAa,GAAG,EAAE,CAAC,CAAC;;ACFlC,SAAS,gBAAgB,CAAC,KAAK,EAAE;AACxC,IAAI,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE;AAC3B;;ACNA,MAAM,SAAS,CAAC;AAChB,IAAI,YAAY,GAAG,aAAa,CAAC,OAAO;AACxC,IAAI,SAAS,GAAG,EAAE;AAClB,IAAI,WAAW,GAAG;AAClB,IAAI,gBAAgB,CAAC,OAAO,EAAE;AAC9B,QAAQ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC;AACpC;AACA,IAAI,eAAe,GAAG;AACtB,QAAQ,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM;AACrC,YAAY,OAAO,IAAI,CAAC,YAAY;AACpC,SAAS,CAAC;AACV;AACA,IAAI,eAAe,CAAC,QAAQ,EAAE;AAC9B,QAAQ,IAAI,CAAC,YAAY,GAAG,QAAQ;AACpC,QAAQ,IAAI,CAAC,eAAe,EAAE;AAC9B;AACA,IAAI,WAAW,GAAG;AAClB,QAAQ,OAAOA,gBAA0B,CAAC,IAAI,CAAC,YAAY,CAAC;AAC5D;AACA;AACA,MAAM,YAAY,GAAG,IAAI,SAAS,EAAE;AACpC,IAAI,MAAM;AACV,SAAS,YAAY,CAAC,MAAM,EAAE;AAC9B,IAAI,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC,KAAK,KAAK;AAC/C,QAAQ,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC;AACjC,QAAQ,IAAI,QAAQ,GAAG,YAAY,CAAC,WAAW,EAAE;AACjD,QAAQ,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC;AACxD,QAAQ,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC;AACxD,KAAK,CAAC;AACN,IAAI,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,KAAK,KAAK;AAChD,QAAQ,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC;AACjC,KAAK,CAAC;AACN,IAAI,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,KAAK,KAAK;AAClD,QAAQ,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC;AAC7C,QAAQ,YAAY,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,CAAC;AACpD,KAAK,CAAC;AACN;AACA,SAAS,IAAI,GAAG;AAChB,IAAI,MAAM,GAAG,IAAI,SAAS,CAAC,OAAO,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,UAAU,CAAC;AACvE,IAAI,YAAY,CAAC,MAAM,CAAC;AACxB;AACA,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,MAAM,IAAI,EAAE,CAAC"}